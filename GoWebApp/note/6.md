# 第6章 データの記憶

- データを保管出来る具体的な場所
  - メモリ
  - ファイルシステム上のファイル
  - サーバプログラムをフロントエンドとするデータベース内

## 6.1 メモリ内の保持
- 実行中のアプリケーション自体に保存されるという意味合い
- 重要なのはコンテナから必要なデータを取り出してくる方法
- なぜメモリ内の保持を考えるか
  - webアプリケーションではリレーショナルデータベースから出発してスケールしていくにつれ、パフォーマンス向上のためにデータベースからの取得データをキャッシュする必要に気付くことが大変多い

## 6.2 ファイルによる保存
- メモリ内の保持はディスクからの取得処理が無いため高速であるが、大きな欠点としてデータが永続的ではないことがある。
- したがって、ハードディスクやフラッシュメモリなどの何らかの不揮発性記憶に保存する必要がある。
- 選択肢はいくつかある
  - 一般的に使われているテキスト形式のcsv
  - Go言語独自のパッケージgobを使用
    - gobとはファイルに保存出来るバイナリ形式で、メモリ内のデータを高速かつ効果的にシリアル化して１つ以上のファイルに保存する

## 6.3 Go言語とSQL
- 堅牢さやスケーラビリティを求める際には「データベースサーバ」に頼る必要がある
- データベースサーバはクライアント・サーバモデルに基づいて他のプログラムがデータにアクセス出来るようにするプログラムプログラム
- 通常はそのサーバを介さない他の手段によるアクセスからデータは保護される
- 一般的には、クライアントがデータベースサーバに接続し、SQLを使ってデータにアクセスする
  - データベース管理システムシステムには多くの場合データベースサーバがシステムの一部として含まれる
  - データベース管理システムの中でも「リレーショナルデータベース管理システム」が広く用いられている
  - これはデータの関係モデルに基づいたデータベース
  - ほとんどの場合リレーショナルデータベースにはリレーショナルデータベースサーバを介してSQLを使ってアクセスする


## 6.4 Go言語とSQLによる関係
- リレーショナルデータベースが普及している大きな理由はテーブル同士を関係付けられること
- これにより一貫した理解しやすい方法で個々のデータを互いに関連つけることで出来る
- レコードにレコードを関連つける方法は実質的には２種類
  - １対１(has one) : 一人のユーザには一人のプロフィールがある
  - １対多(has many) : 一人のユーザには複数のフォーラム投稿がある
  - 多対１(belongs to) : 多数のフォーラム投稿が一人のユーザによるものである
  - 多対多 : 一人のユーザが多数のフォーラムスレッドに参加でき、１つのフォーラムスレッドも多数のユーザが参加できる